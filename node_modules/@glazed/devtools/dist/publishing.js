import { TileDocument } from '@ceramicnetwork/stream-tile';
import { promiseMap } from './utils.js';
/** @internal */ export async function publishCommits(ceramic, [genesis, ...updates], createOpts = {
    anchor: false,
    pin: true
}, commitOpts = {
    anchor: false
}) {
    const doc = await TileDocument.createFromGenesis(ceramic, genesis, createOpts);
    for (const commit of updates){
        await ceramic.applyCommit(doc.id, commit, commitOpts);
    }
    return doc;
}
/** @internal */ export async function publishSignedMap(ceramic, signed, createOpts, commitOpts) {
    return await promiseMap(signed, async (commits)=>await publishCommits(ceramic, commits, createOpts, commitOpts)
    );
}
